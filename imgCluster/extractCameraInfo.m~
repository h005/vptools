%% extract camera position, center direction and up direction
function [ps,cd,ud] = extractCameraInfo(mv)
% mv is ncases * 4 * 4 matrix
% ps position ncases * 3
% cd center direction ncases * 3
% ud up direction ncases * 3

ncases = size(mv,1);
ps = zeros(ncases,3);
cd = zeros(ncases,3);
ud = zeros(ncases,3);

for i=1:ncases
    rotate = mv(i,1:3,1:3);
    rotate = reshape(rotate,3,3);
    trans = mv(i,1:3,4);
    trans = reshape(trans,3,1);
    % camera towards inverse z axis so [0,0,-1]
    zvec = [0,0,-1];
    yvec = [0,1,0];
    ps(i,:) = - trans' * rotate;
    cd(i,:) = zvec * rotate;
    % center dircetion was a line pass the camera position point
    % cd(i,:) = cd(i,:) / norm(cd(i,:)) + ps(i,:);
    cd(i,:) = cd(i,:) / norm(cd(i,:));
    ud(i,:) = yvec * rotate;
    ud(i,:) = ud(i,:) / norm(ud(i,:));
end