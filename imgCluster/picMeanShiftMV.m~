%% mean shift cluster imgs metric distance by mv matrix
function [cluster,label,clusterCenter] = picMeanShiftMV(mv)
% mv matrix is matrix * 4 * 4
ncases = size(mv,1);
label = cell(ncases,1);
id = 1:ncases;
% logmv is cells ncases * 1
logmv = convert2logm(mv);

% comput r
maxDis = -inf;
minDis = inf;
for i = 1:ncases
    disVec = getVecDistance(logmv,logmv{i});
    tmpmax = max(disVec);
    tmpmin = min(disVec);
    if maxDis < tmpmax
        maxDis = tmpmax;
    end
    if minDis > tmpmin
        minDis = tmpmin;
    end
end
r = (maxDis - minDis) * 0.05 + minDis;

% for each case
for i=1:ncases
    innerSet = [];
    mlogmv = logmv{i}
end

function disVec = getVecDistance(logmv,mlogmv)
ncases = size(logmv,1);
disVec = zeros(ncases,1);
for i=1:ncases
    disVec(i) = norm(expm(logmv{i} - mlogmv));
end

function logmv = convert2logm(mv)
ncases = size(mv,1);
logmv = cell(ncases,1);
for i=1:ncases
    tmpmv = mv(i,:,:);
    tmpmv = reshape(tmpmv,4,4);
    logmv{i} = logm(tmpmv);
end
